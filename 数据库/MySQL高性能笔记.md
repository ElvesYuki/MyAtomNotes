 

# MySQL高性能笔记

## 第一章  MySQL架构与历史





## 第二章  MySQl基准测试





## 第三章  服务器性能剖析





## 第四章  Schema与数据类型优化

### 4.1  选择优化的数据类型

####         数据库数据类型的设计：

1、更小通常更好(当然了)

2、简单就好

​		**整型**比字符串操作代价更低，因为字符集和校对规则(排序规则)使字符比较整型比较更复杂

​				使用**内建类型**(date,time,datetime)而不是字符串来存储时间

​				应该用**整型**来存储IP地址

3、尽量**避免NULL**

​		因为查询中包含可为NULL的列，对MySQL来说更难优化，因为可为NULL的列使得索引、索引统计和值比较都更复杂，可为NULL的列会使用更多的存储空间，在MySQL里也需要特殊处理。

​		当可为NULL的列被索引时，每个索引记录需要一个额外的字节，在MyISAM里甚至还可能导致固定大小的索引(例如只有一个整数列的索引)变成可变大小的索引。

​		但性能优化时提升又不大，所以设计的时候考虑一下这点，真出问题再视情况而定。

##### 4.1.1  整数类型

​		整数和实数

​		1、整数：

​		可以使用：  TINYINT, SAMLLINT, MEDIUMINT, INT, BIGINT

​								8			16				24					32	64		位存储空间 

​		可表示 -2^(N-1)到2^(N-1)-1

​		可选UNSIGNED属性，表示不允许负值  ，**性能是一样的**

​		如： TINYINT.UNSIGNED 可以存储范围0~255, 而TINYINT 存储范围 -128~127

​		你的选择决定MySQL是怎么在内存和磁盘中保存数据的。然而，**整数计算一般使用64位的BIGINT整数**，即使在32位环境也是如此。(一些聚合函数例外，它们使用DECIMAL或DOUBLE进行计算)。



##### 4.1.2  实数类型

1、FLOAT和DOUBLE类型支持使用标准的浮点运算进行近似计算，CPU支持原生浮点计算，所以明显更快。

2、DECIMAL支持精确计算，MySQL本身实现的，可以指定小数点前后所允许的最大位数，这回影响列的空间消耗。

3、MySQL使用DOUBLE作为内部浮点计算的类型。

4、尽量只在对小数进行精确计算时才使用DECIMAL——例如存储财务数据。

5、数据量较大的时候，可以考虑使用BIGINT代替DECIMAL，将需要存储的货币单位根据小数的位数乘以相应的倍数即可。

##### 4.1.3  实数类型

1、每个字符串列可以定义自己的字符集和排序规则，或者说校对规则(collation),这些东西会很大程度上影响性能。

2、



